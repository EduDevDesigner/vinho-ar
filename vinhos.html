<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <title>Vinhos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
      /* üîπ Bot√£o de Descri√ß√£o */
      #btn-desc {
        position: fixed;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0,0,0,0.6);
        color: #fff;
        border: 1px solid #fff;
        padding: 10px 16px;
        border-radius: 6px;
        font-size: 15px;
        cursor: pointer;
        z-index: 9999;
        display: none;
      }

      /* üîπ Painel */
      #painel-desc {
        position: fixed;
        right: 0;
        top: 0;
        width: 70%;
        height: 100%;
        background: rgba(0,0,0,0.88);
        color: white;
        padding: 20px;
        z-index: 10000;
        display: none;
      }

      /* üîπ Bot√£o X fechar */
      #fechar-painel {
        position: absolute;
        right: 15px;
        top: 15px;
        font-size: 26px;
        cursor: pointer;
        color: #fff;
      }

      /* üîπ Alinhar texto √† direita (implementa√ß√£o solicitada) */
      #texto-vinho {
        text-align: right;
      }
    </style>

  </head>
  <body>
    
    <!-- üîπ Mensagem de foco no track -->
    <div id="track-message">
      Aponte a c√¢mera para o marcador!
    </div>

    <!-- üîπ Bot√£o de descri√ß√£o -->
    <div id="btn-desc">Descri√ß√£o</div>

    <!-- üîπ Painel lateral -->
    <div id="painel-desc">
      <div id="fechar-painel">X</div>
      <h2>Caracter√≠sticas do Vinho</h2>
      <p id="texto-vinho"></p>
    </div>

    <!-- üéµ √Åudios -->
    <audio id="audio-vinho1" src="Audios/Pinot%20Noir.mp3"></audio>
    <audio id="audio-vinho2" src="Audios/Riesling.mp3"></audio>

    <!-- Cena AR -->
    <a-scene mindar-image="imageTargetSrc: Imagens/targets.mind; filterMinCF: 0.0001; 
              filterBeta: 0.05;
              missTolerance: 5;
              warmupTolerance: 4;" 
             color-space="sRGB" 
             renderer="colorManagement: true, physicallyCorrectLights" 
             xr-mode-ui="enabled: false" 
             device-orientation-permission-ui="enabled: false">

      <a-assets>
        <a-asset-item id="vinho1" src="Modelos/vinho1.glb"></a-asset-item>
        <a-asset-item id="vinho2" src="Modelos/vinho2.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-gltf-model rotation="90 0 0 " position="0 0 0" scale="0.5 0.5 0.5" src="#vinho1"></a-gltf-model>
      </a-entity>

      <a-entity mindar-image-target="targetIndex: 1">
        <a-gltf-model rotation="90 0 0 " position="0 0 0" scale="0.5 0.5 0.5" src="#vinho2"></a-gltf-model>
      </a-entity>

    </a-scene>

    <script>
      window.addEventListener("DOMContentLoaded", () => {

        const trackMessage = document.getElementById("track-message");
        const btnDesc = document.getElementById("btn-desc");
        const painel = document.getElementById("painel-desc");
        const fecharPainel = document.getElementById("fechar-painel");
        const textoVinho = document.getElementById("texto-vinho");

        // üéµ √Åudios
        const audio1 = document.getElementById("audio-vinho1");
        const audio2 = document.getElementById("audio-vinho2");

        let vinhoAtual = null; // guarda qual vinho est√° ativo

        const targets = document.querySelectorAll("[mindar-image-target]");

        targets.forEach(target => {

          target.addEventListener("targetFound", () => {
            trackMessage.style.display = "none";
            btnDesc.style.display = "block";

            const index = target.getAttribute("mindar-image-target").targetIndex;

            vinhoAtual = index; // salva qual vinho est√° ativo

            if (index == "0") {
              textoVinho.innerHTML = `
               <p>O Vinho Marcus James Pinot Noir √© leve, com aromas frutados que lembram morangos e um paladar macio. 
               Outra caracter√≠stica marcante √© que ele √© um vinho jovem e muito agrad√°vel.</p>

               <h3>Caracter√≠sticas do Produto</h3>

              <p><strong>Tipo de Vinho:</strong> Vinho Tinto Meio Seco</p>
              <p><strong>Tipo de Fechamento:</strong> Rolha</p>
              <p><strong>Safra:</strong> 2024</p>
              <p><strong>Regi√£o:</strong> Serra Ga√∫cha</p>
              <p><strong>Uvas:</strong> Pinot Noir</p>
              `;
            } 
            else if (index == "1") {
              textoVinho.innerHTML = `
               <p>O Vinho Marcus James Riesling traz as caracter√≠sticas marcantes desse vinho cl√°ssico. 
               A sua tonalidade amarelo-palha delicada e brilhante convida os sentidos a uma jornada sensorial √∫nica. 
               No aroma traz notas de frutas c√≠tricas vibrantes, como lim√£o, envoltas em nuances florais sutis que lembram a delicadeza de uma primavera em flor.</p>
               <p>√â equilibrado no paladar, com uma acidez refrescante que dan√ßa harmoniosamente com uma do√ßura suave e envolvente. 
               A experi√™ncia de pureza e eleg√¢ncia, com sabores frescos que se desdobram suavemente, est√£o presentes em cada gole, 
               culminando em um final persistente e gratificante.</p>

               <h3>Caracter√≠sticas do Produto</h3>
               <p><strong>Tipo de Vinho:</strong> Vinho Branco Suave</p>
               <p><strong>Tipo de Fechamento:</strong> Screw Cap</p>
               <p><strong>Safra:</strong> 2020</p>
               <p><strong>Regi√£o:</strong> Serra Ga√∫cha</p>
               <p><strong>Uvas:</strong> Riesling</p>
               `;
            }

          });

          target.addEventListener("targetLost", () => {
            trackMessage.style.display = "block";
            btnDesc.style.display = "none";
            painel.style.display = "none";

            audio1.pause();
            audio2.pause();
            audio1.currentTime = 0;
            audio2.currentTime = 0;
          });

        });

        btnDesc.addEventListener("click", () => {
          painel.style.display = "block";

          if (vinhoAtual == "0") {
            audio2.pause();
            audio2.currentTime = 0;
            audio1.play();
          }
          if (vinhoAtual == "1") {
            audio1.pause();
            audio1.currentTime = 0;
            audio2.play();
          }
        });

        fecharPainel.addEventListener("click", () => {
          painel.style.display = "none";
          audio1.pause();
          audio2.pause();
          audio1.currentTime = 0;
          audio2.currentTime = 0;
        });

      });
    </script>

  </body>
</html>
