<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <title>Vinhos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css">
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
  /* Bot√£o transparente e vis√≠vel */
  #btn-descricao {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 14px 22px;
    font-size: 20px;
    background: rgba(0, 0, 0, 0.6); /* PRETO TRANSPARENTE */
    color: #ffffff; /* TEXTO BRANCO */
    border: 2px solid rgba(255, 255, 255, 0.8);
    border-radius: 10px;
    backdrop-filter: blur(4px);
    display: none;
    z-index: 999999; /* For√ßa a aparecer por cima */
  }

  /* Painel */
  #painel-descricao {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 370px;
    background: rgba(0, 0, 0, 0.75); /* PRETO TRANSL√öCIDO */
    color: #ffffff; /* TEXTO BRANCO */
    padding: 25px;
    border-radius: 12px;
    border: 2px solid rgba(255, 255, 255, 0.8);
    box-shadow: 0 0 25px rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(6px);
    display: none;
    z-index: 9999999;
  }

  #painel-descricao h2 {
    margin: 0;
    margin-bottom: 12px;
    font-size: 22px;
    color: #fff;
  }

  #painel-descricao p {
    font-size: 18px;
    line-height: 1.4;
    color: #eee;
  }

  /* Bot√£o X */
  #fechar-painel {
    position: absolute;
    top: 8px;
    right: 12px;
    font-size: 26px;
    cursor: pointer;
    color: #fff;
  }
</style>


  </head>
  <body>
    
    <!-- üîπ Mensagem de foco no track -->
    <div id="track-message">
      Aponte a c√¢mera para o marcador!
    </div>

    <!-- üîπ Bot√£o de descri√ß√£o -->
    <button id="btn-descricao">Descri√ß√£o</button>

    <!-- üîπ Painel flutuante -->
    <div id="painel-descricao">
      <span id="fechar-painel">‚úñ</span>
      <h2 id="titulo-vinho"></h2>
      <p id="texto-vinho"></p>
    </div>

    <!-- Cena AR -->
    <a-scene mindar-image="imageTargetSrc: Imagens/targets.mind;" 
             color-space="sRGB" 
             renderer="colorManagement: true, physicallyCorrectLights" 
             xr-mode-ui="enabled: false" 
             device-orientation-permission-ui="enabled: false">

      <a-assets>
        <a-asset-item id="vinho1" src="Modelos/vinho1.glb"></a-asset-item>
        <a-asset-item id="vinho2" src="Modelos/vinho2.glb"></a-asset-item>
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

      <a-entity mindar-image-target="targetIndex: 0">
        <a-gltf-model rotation="90 0 0 " position="0 0 0" scale="1 1 1" src="#vinho1"></a-gltf-model>
      </a-entity>

      <a-entity mindar-image-target="targetIndex: 1">
        <a-gltf-model rotation="90 0 0 " position="0 0 0" scale="1 1 1" src="#vinho2"></a-gltf-model>
      </a-entity>
    </a-scene>

    <script>
      window.addEventListener("DOMContentLoaded", () => {
      const trackMessage = document.getElementById("track-message");
      const btnDescricao  = document.getElementById("btn-descricao");
      const painel        = document.getElementById("painel-descricao");
      const fecharPainel  = document.getElementById("fechar-painel");

      const tituloVinho   = document.getElementById("titulo-vinho");
      const textoVinho    = document.getElementById("texto-vinho");

      // Textos dos vinhos (exemplo, voc√™ pode editar)
      const informacoes = {
        0: {
          titulo: "Vinho Tinto Reserva",
          texto: "Aroma intenso, notas de frutas vermelhas, taninos macios e final prolongado."
        },
        1: {
          titulo: "Vinho Branco Seco",
          texto: "Refrescante, acidez equilibrada, notas c√≠tricas e florais, ideal para dias quentes."
        }
      };

      let targetAtual = null;

      // Pega todos os targets da cena
      const targets = document.querySelectorAll("[mindar-image-target]");

      targets.forEach(target => {

        target.addEventListener("targetFound", () => {
          trackMessage.style.display = "none";   // Esconde mensagem

          // Obt√©m index do target
          targetAtual = parseInt(target.getAttribute("mindar-image-target").split(":")[1]);

          // Mostra bot√£o
          btnDescricao.style.display = "block";
        });

        target.addEventListener("targetLost", () => {
          trackMessage.style.display = "block";  // Mostra mensagem

          // Esconde tudo
          btnDescricao.style.display = "none";
          painel.style.display = "none";

          targetAtual = null;
        });

      });

      // Clique no bot√£o Descri√ß√£o ‚Üí abre painel
      btnDescricao.addEventListener("click", () => {
        if (targetAtual !== null) {
          tituloVinho.textContent = informacoes[targetAtual].titulo;
          textoVinho.textContent  = informacoes[targetAtual].texto;
          painel.style.display = "block";
        }
      });

      // Fechar painel
      fecharPainel.addEventListener("click", () => {
        painel.style.display = "none";
      });

    });
    </script>

  </body>
</html>
